<!DOCTYPE html>
<html>
<head>
    <title>Cloud Defender Debug Fix</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            overflow: auto;
        }
        .instructions {
            background-color: #e8f4ff;
            border-left: 4px solid #0066cc;
            padding: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Cloud Defender Debug Fix</h1>
    
    <div class="instructions">
        <h2>Instructions</h2>
        <p>There appears to be an issue with JavaScript code being incorrectly appended to the Python file. 
        The best approach is to create a separate JavaScript file for the debug functionality and include it properly.</p>
        
        <ol>
            <li>Create a new file called <code>debug.js</code> in the same directory</li>
            <li>Copy the JavaScript code below into that file</li>
            <li>Modify the HTML template in app.py to include this script</li>
            <li>Remove any incorrectly appended JavaScript from the Python file</li>
        </ol>
    </div>
    
    <h2>1. Create debug.js with this content:</h2>
    <pre>
// Debug functionality for Cloud Defender game
document.addEventListener('DOMContentLoaded', function() {
    // Add debug mode toggle button
    const gameContainer = document.getElementById('game-container');
    if (!gameContainer) return;
    
    const debugModeBtn = document.createElement('button');
    debugModeBtn.textContent = 'Toggle Debug Mode';
    debugModeBtn.className = 'button';
    debugModeBtn.style.position = 'absolute';
    debugModeBtn.style.top = '10px';
    debugModeBtn.style.right = '10px';
    debugModeBtn.style.zIndex = '1000';
    debugModeBtn.style.fontSize = '12px';
    debugModeBtn.style.padding = '5px';
    gameContainer.appendChild(debugModeBtn);
    
    // Add debug overlay if it doesn't exist
    let debugOverlay = document.getElementById('debug-overlay');
    if (!debugOverlay) {
        debugOverlay = document.createElement('div');
        debugOverlay.id = 'debug-overlay';
        debugOverlay.className = 'debug-overlay';
        gameContainer.appendChild(debugOverlay);
    }
    
    // Debug mode state
    window.debugMode = false;
    
    // Toggle debug mode
    debugModeBtn.addEventListener('click', function() {
        window.debugMode = !window.debugMode;
        debugOverlay.style.display = window.debugMode ? 'block' : 'none';
        
        // Toggle hitbox visualization
        const hitboxes = document.querySelectorAll('.hitbox-debug');
        hitboxes.forEach(function(box) {
            box.style.display = window.debugMode ? 'block' : 'none';
        });
        
        // Update button text
        debugModeBtn.textContent = window.debugMode ? 'Hide Debug Mode' : 'Show Debug Mode';
        
        // Add CSS for hitbox visualization if needed
        if (window.debugMode && !document.getElementById('debug-styles')) {
            const style = document.createElement('style');
            style.id = 'debug-styles';
            style.textContent = `
                .hitbox-debug {
                    position: absolute;
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 100;
                }
                .bullet-hitbox {
                    border: 1px solid yellow;
                    opacity: 0.5;
                }
                .enemy-hitbox {
                    border: 1px solid red;
                    opacity: 0.5;
                }
                .debug-overlay {
                    background-color: rgba(0,0,0,0.7) !important;
                    padding: 10px !important;
                    font-size: 14px !important;
                    z-index: 1000 !important;
                }
            `;
            document.head.appendChild(style);
        }
    });
});

// Function to draw hitboxes for debugging (to be called in gameLoop)
function drawDebugHitboxes(gameContainer, bullets, enemies) {
    if (!window.debugMode) return;
    
    // Clear any existing hitbox visualizations
    const existingHitboxes = document.querySelectorAll('.hitbox-debug');
    existingHitboxes.forEach(box => box.remove());
    
    // Draw bullet hitboxes
    bullets.forEach(bullet => {
        const hitbox = document.createElement('div');
        hitbox.className = 'hitbox-debug bullet-hitbox';
        hitbox.style.left = (bullet.x - 15) + 'px';
        hitbox.style.top = (bullet.y - 15) + 'px';
        hitbox.style.width = '30px';
        hitbox.style.height = '30px';
        gameContainer.appendChild(hitbox);
    });
    
    // Draw enemy hitboxes
    enemies.forEach(enemy => {
        const hitbox = document.createElement('div');
        hitbox.className = 'hitbox-debug enemy-hitbox';
        hitbox.style.left = (enemy.x - 25) + 'px';
        hitbox.style.top = (enemy.y - 25) + 'px';
        hitbox.style.width = '50px';
        hitbox.style.height = '50px';
        gameContainer.appendChild(hitbox);
    });
}

// Function to update debug overlay
function updateDebugOverlay(debugOverlay, gameStats) {
    if (!window.debugMode || !debugOverlay) return;
    
    debugOverlay.innerHTML = `
        Bullets: ${gameStats.bullets || 0}<br>
        Enemies: ${gameStats.enemies || 0}<br>
        Player: (${gameStats.playerX || 0}, ${gameStats.playerY || 0})<br>
        FPS: ${gameStats.fps || 0}<br>
        Hit radius: 25px
    `;
}
    </pre>
    
    <h2>2. Add this script tag to your HTML template in app.py:</h2>
    <pre>
&lt;script src="/assets/debug.js"&gt;&lt;/script&gt;
    </pre>
    
    <h2>3. Make sure your app.py serves static files:</h2>
    <pre>
@app.route('/assets/&lt;path:filename&gt;')
def serve_asset(filename):
    """Serve assets"""
    return send_from_directory('assets', filename)
    </pre>
    
    <h2>4. Create the assets directory if it doesn't exist:</h2>
    <pre>
mkdir -p /home/dula-ef/office/cloudopsteam/aws-qcli-game/assets
    </pre>
    
    <h2>5. Save debug.js to the assets directory:</h2>
    <pre>
cp /home/dula-ef/office/cloudopsteam/aws-qcli-game/debug.js /home/dula-ef/office/cloudopsteam/aws-qcli-game/assets/
    </pre>
</body>
</html>
